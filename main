from flask import Flask, request, jsonify, render_template, session, redirect
from blockchain import has_recent_ubi_claim
from analytics_service import analytics
from routes import routes
from hour_bonus import (
    claim_hourly_bonus,
    check_hourly_bonus_eligibility,
    get_next_claim_time,
    get_total_hourly_bonus_earned

from learn_and_earn import init_learn_and_earn
from web3 import Web3
from datetime import datetime # Import datetime for session timestamp
import os
import logging
import subprocess
import sys
import json

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

app = Flask(__name__)
app.secret_key = os.environ.get('SECRET_KEY',


from datetime import timedelta
app.permanent_session_lifetime = timedelta(hours=24)  # 24 hour session lifetime
app.config['SESSION_COOKIE_SECURE'] = False  # Set to True in production with HTTPS
app.config['SESSION_COOKIE_HTTPONLY'] = True
app.config['SESSION_COOKIE_SAMESITE'] = 'Lax'
